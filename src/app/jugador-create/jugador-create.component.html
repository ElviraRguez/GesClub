<app-header [isUserLoggedIn]="true"></app-header>
<div class="container">
  <a mat-raised-button color="primary" [routerLink]="['/jugadores']">
    <mat-icon>arrow_back</mat-icon>
  </a>

  <div class="content form">
    <h2>Nuevo miembro</h2>
    <form [formGroup]="jugadorForm" (ngSubmit)="onFormSubmit(jugadorForm)">
      <div class="row">
        <div class="col-6">
          <mat-form-field class="full-width">
            <mat-label>DNI</mat-label>
            <input matInput placeholder="DNI" formControlName="dni" required>
            <mat-error>
              <span *ngIf="!jugadorForm.get('dni').valid && jugadorForm.get('dni').touched">Por favor, introduzca un DNI valido para el jugador.</span>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="full-width">
            <mat-label>Nombre</mat-label>
            <input matInput placeholder="Nombre" formControlName="nombre" required>
            <mat-error>
              <span *ngIf="!jugadorForm.get('nombre').valid && jugadorForm.get('nombre').touched">Por favor, introduzca el nombre del jugador.</span>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="full-width">
            <mat-label>Apellidos</mat-label>
            <input matInput placeholder="Apellidos" formControlName="apellidos" required>
            <mat-error>
              <span *ngIf="!jugadorForm.get('apellidos').valid && jugadorForm.get('apellidos').touched">Por favor, introduzca los apellidos del jugador.</span>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="full-width">
            <mat-label>Dirección</mat-label>
            <input matInput placeholder="Dirección" formControlName="direccion" required>
            <mat-error>
              <span *ngIf="!jugadorForm.get('direccion').valid && jugadorForm.get('direccion').touched">Por favor, introduzca un dirección.</span>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="full-width">
            <mat-label>Fecha de Nacimiento</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="fechaNacimiento" required>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>

          <mat-form-field class="full-width">
            <mat-label>Pais</mat-label>
            <mat-select formControlName="pais" required>
              <mat-option value="ESP">España</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="col-6">
          <mat-form-field class="full-width">
            <mat-label>Teléfono</mat-label>
            <input matInput placeholder="Teléfono" formControlName="telefono" required>
            <mat-error>
              <span *ngIf="!jugadorForm.get('telefono').valid && jugadorForm.get('telefono').touched">Por favor, introduzca un teléfono valido.</span>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="full-width">
            <mat-label>Email</mat-label>
            <input matInput placeholder="Email" formControlName="email" required>
            <mat-error>
              <span *ngIf="!jugadorForm.get('email').valid && jugadorForm.get('email').touched">Por favor, introduzca un email valido.</span>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="full-width">
            <mat-label>Función</mat-label>
            <mat-select formControlName="funcion" required>
              <mat-option value="jugador">Jugador</mat-option>
              <mat-option value="entrenador">Entrenador</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="full-width">
            <mat-label>Club</mat-label>
            <mat-select formControlName="club" required>
              <mat-option *ngFor="let club of clubs" [value]="club">{{ club.nombre }}</mat-option>
            </mat-select>
          </mat-form-field>

          <!-- TODO MOSTRAR SOLO LAS CATEGORIAS DEL CLUB SELECCIONADO -->
          <mat-form-field class="full-width">
            <mat-label>Categoría</mat-label>
            <mat-select formControlName="categoria" required>
              <mat-option *ngFor="let categoria of categorias" [value]="categoria">{{ categoria.nombre }}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="full-width">
            <mat-label>Observaciones</mat-label>
            <textarea matInput placeholder="Observaciones" formControlName="observaciones"></textarea>
          </mat-form-field>
        </div>
      </div>
      <div class="button-row">
        <button type="submit" [disabled]="!jugadorForm.valid" mat-raised-button color="primary">
          <mat-icon>save</mat-icon>
        </button>
      </div>
    </form>
  </div>
</div>
